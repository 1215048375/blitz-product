# 第九章 - 倒数法


## 上线前怎么做测试



## 第 5 件事：Close Alpha Test、Close Open Test

后一个月是测试期。这一个月又分成

* close alpha
* close beta

### Close Alpha 内测 (一周)

close alpha 的对象是开发组以及营运组人员。也就是与核心较为相关的组别。此时针对的测试目标是这个 project 业务上应该被「实作」的 functionalty。比如说是食谱网站，就应该可以

* 上传食物照片
* 新增烹饪步骤
* 站方精选
* 有热门食谱、新进食谱
* 分享到社群网路 ...etc

如果是讨论区，要应该可以

* 可以发表文章
* 可以回应文章
* 可以贴图
* 可以收藏
* 可以搜寻
* 编辑器运作正常 ...etc.

另外测试时要拟定使用「未登入会员」、「登入会员」、「营运权限」、「Admin 权限」各测过一次。

因为开发组成员在撰写功能时，为了方便，几乎都是以 admin 帐号在开发，如果不制定测试步骤和角色，很容易没测到死角。

此时的修复重点放在 feature complete ( 或取舍 ) 以及 functionaly 是否正常运作。

**请不要在此时进行任何 UI 动线调整**

### Close Beta 半公测 (二周+)

close beta 的对象是全公司所有人，公司员工的亲朋好友，可以信赖的死忠会员等等...etc. 此时针对的测试目标是这个 project 的 UI 动线。

如果是讨论区：

* 发表的动线是否顺畅
* 是否 UI 的暗示容易让使用者 miss 掉上传照片步骤
* 回应文章的动线是否流畅
* 网站新讯息的流动是否不够快速，容易造成网站看起来一片死城。

此时已经是视同准上线了（所以 Close Alpha 阶段的资料会清掉），所有营运组的人必须视同营运状态一样运营站务，以避免正式开站遇到状况时手忙脚乱。

（这一招是从参访壹电视时学到的。当时壹电视快开台时有受邀去内部参访，当时听到他们已经内部试run 报新闻run 了一年时，震撼非常... XD）

此时的修复重点放在 UI 动线的调整，以及运营方针、步骤的调整，避免开站之后网站就变成死城。

### Performance Tuning 与 Website Optimized （一周）

我在开发阶段时，最常向 RD 宣导的事情是：我不想管你这个功能怎么写出来，但我要你准时交出来。 （但最少要符合内部写程式规范，有办法读懂）

原因是：网站最重要的是 Deliver 上线。而不是站上的 feature 用了多屌的技术，用了多棒的 best practices，没有用户会在意这件事。而「贪玩」「迟交」会砸了一切。

直到 Open Beta 期，Optimized 这件事都不会被提到。因为在网站稍微 stable 之前，所有的 optimized 都毫无意义，做了也是白作。因为会发生效能瓶颈的地方，永远在你设计时意想不到的地方。

#### Backend Performance Tuning

如何作 Performance Tuning？

* 抓出最慢的地方 Refactor 掉

幸运的是，我的专案都是 Rails Project，有[New Relic](http://newrelic.com/) 这套软体可以用。它可以帮你找出你的网站哪一段 Ruby Code 特别没效率，哪一段 code 制造出来的 SQL query 特别 slow。

其他技巧请看：[Rapid development with Rails](http://www.slideshare.net/xuitejoke/rapid-development-with-rails-7394238) P.54- P.59

* [Scaling Rails Site：Reading Material # 1](http://wp.xdite.net/?p=1597)
* [Scaling Rails Site：Reading Material # 2](http://wp.xdite.net/?p=1617)
* [Scaling Rails Site：Reading Material # 3](http://wp.xdite.net/?p=1664)
* [Scaling Rails Site：Reading Material # 4](http://wp.xdite.net/?p=1682)
* [Scaling Rails Site：Reading Material # 5](http://wp.xdite.net/?p=1704)

这是其他题目了。有空我会再整理 update 一篇 Rails Performance Tuning 的文章。

* 找出最常造访的页面压力测试

既然已经进入 Open Beta 期了，这时候手上应该可以拿到这个网站最常造访和效率最差的页面。

可以使用 [ab](http://httpd.apache.org/docs/2.0/programs/ab.html) 去对网站进行压力测试。

再决定是要 refactor slow code 或者是先上 cache 档着先。


#### Frotend Performance Tuning

影响网站使用者感受最大的其实不是 backend 的效率，而是 Browser side 的效率。上线前我会

* 按照 [Best Practices for Speeding Up Your Web Site](http://developer.yahoo.com/performance/rules.html) 调整

其他技巧请看：

1. [Rapid development with Rails](http://www.slideshare.net/xuitejoke/rapid-development-with-rails-7394238) P.42- P.53
2. [Scaling Rais Site by default](http://www.slideshare.net/xuitejoke/scaling-rails-sites-by-default)

#### Website Optimized

以上说的都只是 Performance。但是这跟实际运营没有那么大的正关系。我擅长开发的是「内容网站」以及「社群网站」，这一类的网站重点其实是 SEO 以及社群穿透力。

* SEO 以及 Facebook OpenGraph

比如说：这是在 T 客邦累积出来的两套 gem。

* [seo_helper](https://github.com/techbang/seo_helper)
* [open_graph_helper](https://github.com/techbang/open_graph_helper)

网站的每一个页面都会确保分享至社群网站是正常的。

* Advertising

靠广告赚钱，所以要调整广告板位

* RSS / Email Subscribe / 粉丝团活动经营操作

跟 user 的互动...etc.

### 开站

这些都确认没什么问题了，然后才是开站。然而开站不是这一切的结束，还有其他事情需要作...
